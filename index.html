<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juhan's 3D Portfolio</title>
    <!-- Link to external CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Shader Code -->
    <script type="x-shader/x-vertex" id="vertexShader">
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
    </script>

    <script type="x-shader/x-fragment" id="fragmentShader">
    varying vec2 vUv;
    uniform float u_time;
    uniform vec3 u_color;

    float julia(vec2 z, vec2 c) {
        // ... (julia function remains the same) ...
        for(float i = 0.0; i < 1e2; i++) {
			float xx = z.x*z.x, yy = z.y*z.y, zz = xx + yy;
			if (zz > 10.0){return 100.0;}
			float re = c.x*z.x + c.y*z.y + xx*xx - yy*yy ;
			float im = c.y*z.x - c.x*z.y + 2.0*z.x*z.y*zz ;
			z = vec2(re, im)/zz;
		}
		return 0.0 ;
    }

    void main() {
        float pi = 3.14159265359;
        float elevation = (vUv.y-0.5)*pi;
        float azimuth = vUv.x*2.0*pi;
        float Z = sin(elevation);
        float cosel = cos(elevation);
        float X = cosel*cos(azimuth);
        float Y = cosel*sin(azimuth);
        vec2 coord = vec2(X/(1.-Z),Y/(1.-Z));

        coord = sqrt(0.1)*coord;
        vec2 c = vec2(-0.01, -0.1);
        float cycle = mod(u_time/1000.,2.*pi);
        c = c + vec2(cos(cycle),sin(cycle))*.01;
        float m = julia(coord, c);

        vec3 baseColor = u_color;
        vec3 rgb = baseColor * (0.5 + 0.5*cos(3.0 + 0.15*m + vec3(0.0, 0.6, 2.)));

        gl_FragColor = vec4(rgb, 1.0);
    }
    </script>
</head>
<body>
    <div id="loader-overlay" class="loader-overlay">
        <div class="loader"><div class="cube-scene"><div class="cube" aria-hidden="true"><div class="cube-face face-front"></div> <div class="cube-face face-back"></div> <div class="cube-face face-right"></div><div class="cube-face face-left"></div> <div class="cube-face face-top"></div> <div class="cube-face face-bottom"></div></div><div class="orbit" aria-hidden="true"><div class="dot d1"></div> <div class="dot d2"></div> <div class="dot d3"></div></div></div><div class="loader-text">Loading the Miniverse...</div><div class="loader-sub">Hang tight — assembling tiny worlds ✨</div></div>
    </div>
    <div id="star-wars-intro" class="star-wars-overlay"><div class="crawl"><p>Greetings. You have entered the digital coordinates of Juhan. Here, code meets creativity in a universe of infinite possibilities. Prepare to explore a galaxy of projects, skills, and digital experiences.</p></div></div>
    <div id="labels-container"></div>
    <button id="back-button" class="back-button">← Return to Overview</button>

    <div id="about-panel" class="content-panel">
        <h2>Code Over Clutter – Building What Plugins Can’t</h2>
        <p>I’m Juhan, a Digital Alchemist and Google Certified Internet Ninja based in South Africa. While other developers are busy shopping for expensive premium plugins to fix their problems, I’m usually busy writing the code to replace them—mostly because I appreciate the performance, but partly because I just really hate paying for things I can build myself.</p>
        <p>I specialize in Bricks Builder and high-octane WordPress development. I don’t just drag-and-drop; I engineer ecosystems. Whether I’m stitching together two separate businesses into a single booking database or building a custom dashboard that makes inventory management easier than making toast, I operate on a strict "Zero Bloat" policy.</p>
        <p>My philosophy is simple: I treat a 3-second load time like a personal insult. I build lean, mean, SEO-optimized machines that keep Google happy and your competitors nervous. If you’re looking for someone to install 50 plugins and hope for the best, I’m not your guy. But if you want a web experience that’s custom-coded to perfection and runs faster than a cheetah on espresso, we should talk.</p>
        <p style="margin-top: 1.5em; font-weight: bold;">Got a project idea that scares other developers?</p>
        <a id="about-cta" href="mailto:juhan@codexist.co.za" class="cta-button">[ Challenge Me ]</a>
    </div>

    <div id="projects-panel" class="content-panel">
        <h2 id="project-title"></h2>

        <div id="project-challenge-container">
            <h3>The Challenge</h3>
            <p id="project-challenge"></p>
            <button id="view-solution-btn" class="cta-button">View Solution</button>
        </div>

        <div id="project-solution-container" style="display: none; opacity: 0;">
            <h3>The Solution</h3>
            <p id="project-solution"></p>
            <h3>The Outcome</h3>
            <p id="project-outcome"></p>
            <div class="project-actions">
                <a id="project-link" href="#" target="_blank" class="cta-button">Visit Website</a>
                <button id="back-to-project-btn" class="cta-button secondary">Back</button>
            </div>
        </div>
    </div>
    <div id="skill-detail-view"><div id="skill-detail-content"><h2 id="skill-detail-title"></h2><p id="skill-detail-text"></p></div><div id="skill-detail-sidebar"></div></div>
    <nav id="gallery-navigation" class="gallery-nav"></nav>

    <div class="bottom-left-menu">
        <!-- Help (Bottom in Visual due to column-reverse, so it must be first in HTML) -->
        <div class="menu-item">
            <div class="menu-button icon-button" onclick="toggleMenu(this)">
                <!-- informational icon -->
                <span style="font-family: serif; font-weight: bold; font-size: 24px;">i</span>
                 <span class="tooltip">Help</span>
            </div>
            <div class="submenu legend-content">
                <p>Rotate: <span>Left Click + Drag</span></p>
                <p>Pan: <span>Right Click + Drag</span></p>
                <p>Zoom: <span>Scroll Wheel</span></p>
            </div>
        </div>

        <!-- Portfolios -->
        <div class="menu-item">
            <div class="menu-button icon-button" onclick="toggleMenu(this)">
                <img src="assets/social-icons/portfolio-final.png" alt="Portfolios">
                 <span class="tooltip">Portfolios</span>
            </div>
            <div class="submenu">
                <div class="submenu-item icon-button">
                    <img src="assets/social-icons/portfolio-final.png" alt="SEO">
                     <span class="tooltip">SEO</span>
                </div>
                <div class="submenu-item icon-button">
                    <img src="assets/social-icons/portfolio-final.png" alt="Paid Marketing">
                     <span class="tooltip">Paid Marketing</span>
                </div>
                <div class="submenu-item icon-button">
                    <img src="assets/social-icons/portfolio-final.png" alt="Graphic Design">
                     <span class="tooltip">Graphic Design</span>
                </div>
            </div>
        </div>

        <!-- Contact -->
        <div class="menu-item">
            <div class="menu-button icon-button" onclick="toggleMenu(this)">
                <img src="assets/social-icons/mobile-final.png" alt="Contact">
                 <span class="tooltip">Contact</span>
            </div>
            <div class="submenu">
                <a href="https://wa.me/27823605374" target="_blank" class="submenu-item icon-button">
                    <img src="assets/social-icons/whatsapp-final.png" alt="WhatsApp">
                    <span class="tooltip">WhatsApp</span>
                </a>
                <a href="mailto:info@codexist.co.za" class="submenu-item icon-button">
                    <img src="assets/social-icons/email-final.png" alt="Email">
                     <span class="tooltip">Email</span>
                </a>
                <a href="https://www.linkedin.com/in/juhanbadenhorst/" target="_blank" class="submenu-item icon-button">
                    <img src="assets/social-icons/linkedin-final.png" alt="LinkedIn">
                     <span class="tooltip">LinkedIn</span>
                </a>
                <a href="#" class="submenu-item icon-button">
                    <img src="assets/social-icons/booking-final.png" alt="Book a Meeting">
                     <span class="tooltip">Book a Meeting</span>
                </a>
            </div>
        </div>

        <!-- Websites (Top) -->
        <div class="menu-item">
            <div class="menu-button icon-button" onclick="toggleMenu(this)">
                <img src="assets/social-icons/website-final.png" alt="Websites">
                <span class="tooltip">Websites</span>
            </div>
            <div class="submenu">
                <a href="https://codexist.co.za" target="_blank" class="submenu-item icon-button">
                    <img src="assets/social-icons/url-final.png" alt="Codexist">
                    <span class="tooltip">Codexist</span>
                </a>
                <a href="https://factorlab.co.za" target="_blank" class="submenu-item icon-button">
                    <img src="assets/social-icons/url-final.png" alt="Factor Lab">
                    <span class="tooltip">Factor Lab</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        function toggleMenu(button) {
            const menuItem = button.closest('.menu-item');
            const wasExpanded = menuItem.classList.contains('expanded');

            // Close other menus
            document.querySelectorAll('.menu-item').forEach(item => {
                if (item !== menuItem) {
                    item.classList.remove('expanded');
                    item.querySelector('.menu-button').classList.remove('active');
                }
            });

            // Toggle current menu
            if (wasExpanded) {
                menuItem.classList.remove('expanded');
                button.classList.remove('active');
            } else {
                menuItem.classList.add('expanded');
                button.classList.add('active');
            }
        }

        // Close menus when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.bottom-left-menu')) {
                 document.querySelectorAll('.menu-item').forEach(item => {
                    item.classList.remove('expanded');
                    item.querySelector('.menu-button').classList.remove('active');
                });
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script type="importmap">
    { "imports": { "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js", "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.161.0/examples/jsm/" } }
    </script>
    <script type="module" src="main.js"></script>
</body>
</html>
